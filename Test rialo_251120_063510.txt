<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Live Price Table + RIALO</title>
  <style>
    body {font-family: Arial, sans-serif; background:#f0f2f5; margin:20px;}
    table {width:100%; max-width:950px; margin:auto; border-collapse:collapse; background:white; box-shadow:0 4px 12px rgba(0,0,0,0.1);}
    th, td {padding:14px; text-align:center; border-bottom:1px solid #ddd;}
    th {background:#007bff; color:white; font-size:1.1em;}
    .up {color:#28a745; font-weight:bold;}
    .down {color:#dc3545; font-weight:bold;}
    .title {text-align:center; font-size:2em; margin:20px; color:#333;}
    .update {text-align:center; color:#666; font-style:italic; margin:10px;}
  </style>
</head>
<body>

  <h1 class="title">Live Price Dashboard + RIALO</h1>
  <p class="update" id="last">Loading data...</p>

  <table id="priceTable">
    <thead>
      <tr>
        <th>Category</th>
        <th>Asset</th>
        <th>Price (USD)</th>
        <th>24h Change</th>
      </tr>
    </thead>
    <tbody>
      <!-- Stocks -->
      <tr><td>Stock</td><td>NVIDIA (NVDA)</td><td id="NVDA">-</td><td id="NVDA_ch">-</td></tr>
      <tr><td>Stock</td><td>Tesla (TSLA)</td><td id="TSLA">-</td><td id="TSLA_ch">-</td></tr>

      <!-- Commodities -->
      <tr><td>Commodity</td><td>Crude Oil WTI</td><td id="OIL">-</td><td id="OIL_ch">-</td></tr>
      <tr><td>Commodity</td><td>Brent Oil</td><td id="BRENT">-</td><td id="BRENT_ch">-</td></tr>

      <!-- Forex -->
      <tr><td>Forex</td><td>USD/JPY</td><td id="USDJPY">-</td><td id="USDJPY_ch">-</td></tr>
      <tr><td>Forex</td><td>EUR/USD</td><td id="EURUSD">-</td><td id="EURUSD_ch">-</td></tr>

      <!-- Crypto -->
      <tr><td>Crypto</td><td>Bitcoin (BTC)</td><td id="BTC">-</td><td id="BTC_ch">-</td></tr>
      <tr><td>Crypto</td><td>Ethereum (ETH)</td><td id="ETH">-</td><td id="ETH_ch">-</td></tr>

      <!-- Metals -->
      <tr><td>Metal</td><td>Gold (XAU)</td><td id="GOLD">-</td><td id="GOLD_ch">-</td></tr>
      <tr><td>Metal</td><td>Silver (XAG)</td><td id="SILVER">-</td><td id="SILVER_ch">-</td></tr>

      <!-- RIALO (Custom) -->
      <tr style="background:#fff8e1;">
        <td>Custom</td>
        <td>RIALO</td>
        <td id="RIALO">-</td>
        <td id="RIALO_ch">-</td>
      </tr>
    </tbody>
  </table>

<script>
const assets = {
  NVDA:   "https://query1.finance.yahoo.com/v8/finance/chart/NVDA",
  TSLA:   "https://query1.finance.yahoo.com/v8/finance/chart/TSLA",
  OIL:    "https://query1.finance.yahoo.com/v8/finance/chart/CL=F",
  BRENT:  "https://query1.finance.yahoo.com/v8/finance/chart/BZ=F",
  USDJPY: "https://query1.finance.yahoo.com/v8/finance/chart/USDJPY=X",
  EURUSD: "https://query1.finance.yahoo.com/v8/finance/chart/EURUSD=X"
};

let goldPrice = 0;
let goldChange = 0;

async function updatePrices() {
  const now = new Date().toLocaleString();
  document.getElementById("last").textContent = "Last updated: " + now;

  // 1. Stocks, Commodities & Forex (Yahoo)
  const yahooSymbols = ["NVDA","TSLA","CL=F","BZ=F","USDJPY=X","EURUSD=X"];
  for (const sym of yahooSymbols) {
    try {
      const res = await fetch(assets[sym.replace(/[=]/g,'')]);
      const json = await res.json();
      const price = json.chart.result[0].meta.regularMarketPrice;
      const prev  = json.chart.result[0].meta.previousClose || price;
      const change = ((price - prev)/prev*100).toFixed(2);

      const cleanSym = sym.replace(/[=]/g,'');
      const elPrice = document.getElementById(cleanSym);
      const elCh    = document.getElementById(cleanSym+"_ch");

      if (sym.includes("JPY") || sym.includes("EUR")) {
        elPrice.textContent = price.toFixed(4);
      } else {
        elPrice.textContent = "$" + Number(price).toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
      }

      elCh.textContent = (change > 0 ? "+" : "") + change + "%";
      elCh.className = change >= 0 ? "up" : "down";
    } catch(e) { console.log(sym, e); }
  }

  // 2. Crypto
  const cg = await (await fetch("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true")).json();
  document.getElementById("BTC").textContent = "$" + cg.bitcoin.usd.toLocaleString();
  document.getElementById("BTC_ch").textContent = (cg.bitcoin.usd_24h_change>0?"+":"") + cg.bitcoin.usd_24h_change.toFixed(2)+"%";
  document.getElementById("BTC_ch").className = cg.bitcoin.usd_24h_change >= 0 ? "up" : "down";

  document.getElementById("ETH").textContent = "$" + cg.ethereum.usd.toLocaleString();
  document.getElementById("ETH_ch").textContent = (cg.ethereum.usd_24h_change>0?"+":"") + cg.ethereum.usd_24h_change.toFixed(2)+"%";
  document.getElementById("ETH_ch").className = cg.ethereum.usd_24h_change >= 0 ? "up" : "down";

  // 3. Metals (Gold & Silver) — kita simpan nilai Gold untuk RIALO
  const metal = await (await fetch("https://api.coingecko.com/api/v3/simple/price?ids=gold,silver&vs_currencies=usd&include_24hr_change=true")).json();

  // Gold
  goldPrice = metal.gold.usd;
  goldChange = metal.gold.usd_24h_change;
  document.getElementById("GOLD").textContent = "$" + goldPrice.toFixed(2);
  document.getElementById("GOLD_ch").textContent = (goldChange>0?"+":"") + goldChange.toFixed(2)+"%";
  document.getElementById("GOLD_ch").className = goldChange >= 0 ? "up" : "down";

  // Silver
  document.getElementById("SILVER").textContent = "$" + metal.silver.usd.toFixed(2);
  document.getElementById("SILVER_ch").textContent = (metal.silver.usd_24h_change>0?"+":"") + metal.silver.usd_24h_change.toFixed(2)+"%";
  document.getElementById("SILVER_ch").className = metal.silver.usd_24h_change >= 0 ? "up" : "down";

  // RIALO = Gold price ÷ 1000
  const rialoPrice = goldPrice / 1000;
  document.getElementById("RIALO").textContent = "$" + rialoPrice.toFixed(4);
  document.getElementById("RIALO_ch").textContent = (goldChange>0?"+":"") + goldChange.toFixed(2)+"%";
  document.getElementById("RIALO_ch").className = goldChange >= 0 ? "up" : "down";
}

// Update every 15 seconds
updatePrices();
setInterval(updatePrices, 15000);
</script>

</body>
</html>
